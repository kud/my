#! /usr/bin/env zsh

BRANCHES_ARRAY=($(git branch -vv | awk '/: gone]/{print $1}' | tr '\n' ' '))

git sync

echo ""

if [ -n "${BRANCHES_ARRAY}" ]; then
  for branch in $BRANCHES_ARRAY; do
    echo "❯ ${branch}"
  done

  echo ""

  read "?Press any key to continue the deletion… or ctrl+c to stop." </dev/tty

  echo ""

  for branch in $BRANCHES_ARRAY; do
    git branch -D $branch
  done

else
  echo "No branch to clean."
fi
