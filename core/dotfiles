#!/usr/bin/env zsh

source "$MY/core/helper"

echo_title_install "dotfiles"



############################################################
# ðŸ“¦ Standard dotfiles
############################################################
dotfiles=(
  ".asdfrc"
  ".editorconfig"
  ".gemrc"
  ".gitattributes"
  ".gitconfig"
  ".gitignore_global"
  ".prettierrc"
  ".zpreztorc"
  ".zshrc"
)

mkdir -p "${ZDOTDIR:-$HOME}/.config/nvim"

for file in "${dotfiles[@]}"; do
  ln -sf "$MY/dotfiles/$file" "${ZDOTDIR:-$HOME}/$file" 2>/dev/null
done

############################################################
# ðŸ§© Neovim config directory setup
############################################################
mkdir -p "$HOME/.config/nvim"
ln -sf "$MY/dotfiles/.config/nvim/init.vim" "$HOME/.config/nvim/init.vim" 2>/dev/null

############################################################
# ðŸ§© Zsh config directory setup
############################################################
mkdir -p "$HOME/.config/zsh"

if [ ! -f "$HOME/.ssh/config" ]; then
  cp "$MY/templates/ssh/config" "$HOME/.ssh/"
fi

if [ ! -f "$HOME/.gitconfig_local" ]; then
  read "?Enter your GitHub username: " GITHUB_USERNAME </dev/tty
  read "?Enter your first name: " GITHUB_FIRSTNAME </dev/tty
  read "?Enter your last name: " GITHUB_LASTNAME </dev/tty
  read "?Enter your email: " GITHUB_EMAIL </dev/tty

  echo "[github]
  user = $GITHUB_USERNAME
[user]
  name = $GITHUB_FIRSTNAME $GITHUB_LASTNAME
  email = $GITHUB_EMAIL
[includeIf \"gitdir:~/Projects/work/\"]
  path = .gitconfig_local_work" >"$HOME/.gitconfig_local"
fi

# reload the shell
source "$HOME/.zshrc"

echo_success "Dotfiles are installed!"
